<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECURE VAULT | GitHub Pages Edition</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        /* --- CORE VISUALS & RESET --- */
        :root {
            --bg-color: #0f0c29;
            --bg-gradient: linear-gradient(300deg, #302b63, #24243e, #0f0c29);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-color: #ffffff;
            --accent-color: #00d2ff;
        }

        * { box-sizing: border-box; outline: none; user-select: none; }
        
        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-color);
            background-image: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- LOGIN SCREEN --- */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 9999;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            backdrop-filter: blur(10px);
        }

        .login-card {
            background: var(--glass-bg);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            text-align: center;
            width: 90%; max-width: 400px;
        }

        .login-card h2 { margin-bottom: 20px; letter-spacing: 2px; text-transform: uppercase; }
        
        .input-group { position: relative; width: 100%; margin-bottom: 20px; }
        .input-group i { position: absolute; left: 15px; top: 15px; color: #aaa; }
        
        input[type="password"] {
            width: 100%; padding: 12px 12px 12px 45px;
            background: rgba(0,0,0,0.3); border: 1px solid #444;
            color: white; border-radius: 8px; font-size: 16px;
            transition: 0.3s;
        }
        input[type="password"]:focus { border-color: var(--accent-color); box-shadow: 0 0 10px rgba(0, 210, 255, 0.3); }

        button.btn-login {
            width: 100%; padding: 12px;
            background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%);
            border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;
            transition: transform 0.2s;
        }
        button.btn-login:active { transform: scale(0.95); }

        .loader {
            border: 4px solid rgba(255,255,255,0.1);
            border-radius: 50%; border-top: 4px solid var(--accent-color);
            width: 30px; height: 30px;
            animation: spin 1s linear infinite;
            margin: 15px auto; display: none;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- DASHBOARD --- */
        #dashboard { display: none; padding: 20px; max-width: 1200px; margin: 0 auto; }
        
        .top-bar {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--glass-bg); padding: 15px 25px;
            border-radius: 15px; border: 1px solid var(--glass-border);
            margin-bottom: 30px;
        }

        .stats-bar {
            display: flex; gap: 20px; font-size: 0.9rem; color: #ccc;
        }

        .search-box {
            background: rgba(0,0,0,0.3); border: none; padding: 10px 15px;
            border-radius: 20px; color: white; width: 200px;
        }

        /* --- GALLERY GRID --- */
        .gallery-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .img-card {
            position: relative; overflow: hidden; border-radius: 12px;
            background: #000; border: 1px solid #333;
            transition: 0.3s; height: 250px; cursor: pointer;
        }
        .img-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); border-color: var(--accent-color); }
        
        .img-card img {
            width: 100%; height: 100%; object-fit: cover;
            transition: 0.5s; opacity: 0.8;
        }
        .img-card:hover img { transform: scale(1.1); opacity: 1; }

        .img-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            padding: 20px 10px 10px;
            transform: translateY(100%); transition: 0.3s;
        }
        .img-card:hover .img-overlay { transform: translateY(0); }
        
        .img-actions button {
            background: none; border: 1px solid white; color: white;
            border-radius: 50%; width: 30px; height: 30px; cursor: pointer;
            margin-right: 5px;
        }
        .img-actions button:hover { background: var(--accent-color); border-color: var(--accent-color); }

        /* --- LIGHTBOX MODAL --- */
        #lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 10000;
            display: none; justify-content: center; align-items: center;
            flex-direction: column;
        }
        #lightbox img { max-width: 90%; max-height: 80vh; border: 2px solid #333; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
        .lightbox-controls { margin-top: 20px; display: flex; gap: 20px; }
        .ctrl-btn {
            background: transparent; color: white; border: 1px solid #555;
            padding: 10px 20px; border-radius: 30px; cursor: pointer; font-size: 16px;
            transition: 0.2s;
        }
        .ctrl-btn:hover { background: var(--accent-color); border-color: var(--accent-color); }
        .close-lb { position: absolute; top: 20px; right: 30px; font-size: 40px; color: #fff; cursor: pointer; }

        /* --- SYSTEM LOGS (To simulate complexity) --- */
        .system-log {
            font-family: 'Courier New', monospace; font-size: 10px; color: #0f0;
            position: fixed; bottom: 10px; left: 10px; opacity: 0.5; pointer-events: none;
        }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="login-overlay">
        <div class="login-card animate__animated animate__fadeInDown">
            <i class="fas fa-fingerprint" style="font-size: 50px; color: var(--accent-color); margin-bottom: 20px;"></i>
            <h2>Secure Access</h2>
            <p style="color: #aaa; font-size: 0.9em; margin-bottom: 20px;">GitHub Pages Secure Gateway</p>
            
            <div id="login-form">
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="pass-input" placeholder="Masukkan Kode Akses..." onkeypress="handleEnter(event)">
                </div>
                <button class="btn-login" onclick="attemptLogin()">UNLOCK VAULT</button>
            </div>
            
            <div class="loader" id="loader"></div>
            <p id="status-msg" style="margin-top: 15px; color: #ff4444; font-size: 0.9em;"></p>
        </div>
    </div>

    <div id="dashboard">
        <div class="top-bar animate__animated animate__fadeInDown">
            <div style="display: flex; align-items: center; gap: 15px;">
                <i class="fas fa-shield-alt" style="font-size: 24px; color: var(--accent-color);"></i>
                <div>
                    <h3 style="margin: 0;">IMG DATABASE</h3>
                    <span style="font-size: 10px; color: #888;">SERVER: GITHUB-PAGES-NODE-01</span>
                </div>
            </div>
            <div class="stats-bar">
                <span><i class="fas fa-image"></i> Loaded: <b id="count-display">0</b></span>
                <span><i class="fas fa-wifi"></i> Status: Online</span>
            </div>
            <div>
                <input type="text" class="search-box" placeholder="Filter ID..." onkeyup="filterImages(this.value)">
                <button onclick="logout()" style="background: #ff4444; border:none; padding: 10px; border-radius: 50%; color:white; cursor:pointer; margin-left: 10px;"><i class="fas fa-power-off"></i></button>
            </div>
        </div>

        <div class="gallery-grid" id="gallery-container">
            </div>
    </div>

    <div id="lightbox">
        <div class="close-lb" onclick="closeLightbox()">&times;</div>
        <img id="lb-img" src="">
        <h4 id="lb-title" style="margin-top: 15px; color: #aaa;"></h4>
        <div class="lightbox-controls">
            <button class="ctrl-btn" onclick="changeImg(-1)"><i class="fas fa-chevron-left"></i> Prev</button>
            <button class="ctrl-btn" onclick="downloadCurrent()"><i class="fas fa-download"></i> Save</button>
            <button class="ctrl-btn" onclick="changeImg(1)">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <div class="system-log" id="console-log">Initializing System...</div>

    <script>
        // --- KONFIGURASI ---
        // Ganti URL ini dengan URL Raw Pastebin Anda
        const PASTEBIN_URL = "https://pastebin.com/raw/75N2BftQ"; 
        
        // Konfigurasi Scanner Gambar
        const FOLDER_PATH = "img/";
        const MAX_SCAN_ATTEMPTS = 50; // Script akan mencoba mencari file 1.jpg s/d 50.jpg
        const EXTENSIONS = ['jpg', 'png', 'jpeg', 'gif'];
        
        // --- VARIABLES ---
        let currentImages = [];
        let currentIndex = 0;
        let isAuthenticated = false;

        // --- CORE FUNCTIONS ---

        function handleEnter(e) {
            if (e.key === 'Enter') attemptLogin();
        }

        async function attemptLogin() {
            const input = document.getElementById('pass-input').value;
            const loader = document.getElementById('loader');
            const btn = document.querySelector('.btn-login');
            const msg = document.getElementById('status-msg');

            // UI feedback
            btn.style.display = 'none';
            loader.style.display = 'block';
            msg.innerText = "Connecting to Secure Server via Proxy...";
            logSystem("Handshake initiated with Pastebin...");

            try {
                // MENGGUNAKAN PROXY UNTUK BYPASS CORS DI GITHUB PAGES
                // Kita menggunakan allorigins.win sebagai perantara
                const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(PASTEBIN_URL)}&disableCache=true`;
                
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error("Server Unreachable");
                
                const realPassword = (await response.text()).trim();

                setTimeout(() => { // Delay buatan biar terlihat canggih "loading"
                    if (input === realPassword) {
                        isAuthenticated = true;
                        document.getElementById('login-overlay').classList.add('animate__fadeOut');
                        setTimeout(() => {
                            document.getElementById('login-overlay').style.display = 'none';
                            document.getElementById('dashboard').style.display = 'block';
                            initGalleryScanner();
                        }, 1000);
                    } else {
                        btn.style.display = 'block';
                        loader.style.display = 'none';
                        msg.innerText = "ACCESS DENIED: Password Invalid.";
                        logSystem("Auth Failed: Invalid Credential");
                    }
                }, 1500);

            } catch (error) {
                btn.style.display = 'block';
                loader.style.display = 'none';
                msg.innerText = "Connection Error: Check Pastebin URL or Internet.";
                console.error(error);
            }
        }

        // --- SCANNER LOGIC (Kunci untuk GitHub Pages) ---
        // Karena tidak ada PHP, kita "Brute Force" cek keberadaan file 1.jpg, 2.jpg, dst.
        async function initGalleryScanner() {
            const container = document.getElementById('gallery-container');
            const countDisplay = document.getElementById('count-display');
            container.innerHTML = ''; 
            logSystem("Scanning directory /img/ for assets...");

            let foundCount = 0;

            // Loop scanner
            for (let i = 1; i <= MAX_SCAN_ATTEMPTS; i++) {
                // Cek untuk setiap ekstensi
                for (let ext of EXTENSIONS) {
                    let fileName = `${i}.${ext}`;
                    let fullPath = FOLDER_PATH + fileName;
                    
                    // Kita coba load gambar secara background
                    let exists = await checkImageExists(fullPath);
                    
                    if (exists) {
                        foundCount++;
                        currentImages.push(fullPath);
                        renderImageCard(fullPath, fileName, container);
                        countDisplay.innerText = foundCount;
                        logSystem(`Asset found: ${fileName}`);
                        break; // Jika sudah ketemu 1.jpg, jangan cari 1.png lagi untuk index yg sama
                    }
                }
            }

            if (foundCount === 0) {
                container.innerHTML = '<p style="grid-column: 1/-1; text-align:center; color:#666;">No secure assets found in /img folder. Ensure files are named 1.jpg, 2.jpg, etc.</p>';
            }
            logSystem("Scan complete.");
        }

        function checkImageExists(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(true);
                img.onerror = () => resolve(false);
                img.src = url;
            });
        }

        function renderImageCard(src, name, container) {
            const div = document.createElement('div');
            div.className = 'img-card animate__animated animate__fadeInUp';
            div.onclick = () => openLightbox(src);
            
            div.innerHTML = `
                <img src="${src}" loading="lazy">
                <div class="img-overlay">
                    <h4 style="margin:0; color:white;">${name}</h4>
                    <div class="img-actions" style="margin-top:10px;">
                        <button><i class="fas fa-search-plus"></i></button>
                    </div>
                </div>
            `;
            container.appendChild(div);
        }

        // --- LIGHTBOX FUNCTIONS ---
        function openLightbox(src) {
            const lb = document.getElementById('lightbox');
            const img = document.getElementById('lb-img');
            const title = document.getElementById('lb-title');
            
            currentIndex = currentImages.indexOf(src);
            img.src = src;
            title.innerText = src.split('/').pop();
            
            lb.style.display = 'flex';
            lb.classList.remove('animate__fadeOut');
            lb.classList.add('animate__fadeIn');
        }

        function closeLightbox() {
            const lb = document.getElementById('lightbox');
            lb.classList.remove('animate__fadeIn');
            lb.classList.add('animate__fadeOut');
            setTimeout(() => lb.style.display = 'none', 300);
        }

        function changeImg(dir) {
            currentIndex += dir;
            if (currentIndex >= currentImages.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = currentImages.length - 1;
            
            const nextSrc = currentImages[currentIndex];
            document.getElementById('lb-img').src = nextSrc;
            document.getElementById('lb-title').innerText = nextSrc.split('/').pop();
        }

        function downloadCurrent() {
            const src = currentImages[currentIndex];
            const a = document.createElement('a');
            a.href = src;
            a.download = src.split('/').pop();
            document.body.appendChild(a);
            a.click();
            document.body.remove(a);
            logSystem("Downloading secure asset...");
        }

        function filterImages(query) {
            const cards = document.querySelectorAll('.img-card');
            cards.forEach(card => {
                const text = card.querySelector('h4').innerText.toLowerCase();
                if (text.includes(query.toLowerCase())) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function logout() {
            location.reload();
        }

        function logSystem(txt) {
            const con = document.getElementById('console-log');
            const time = new Date().toLocaleTimeString();
            con.innerText = `[${time}] SYSTEM: ${txt}`;
        }
    </script>
</body>
</html>
